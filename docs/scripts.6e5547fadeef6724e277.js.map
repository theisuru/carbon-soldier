{"version":3,"sources":["src/assets/js/gear.js"],"names":["gear","teeth","radius","annulus","n","r2","Math","abs","r0","r1","r3","toothRadius","da","PI","a0","path","cos","sin","i","push","join","drawGear","x","y","start","Date","now","svg","d3","select","append","attr","frame","datum","selectAll","data","fill","origin","d","interval","drawInCanvas","speed","angle","transform","node"],"mappings":"AAEA,SAASA,MAAK,MAACC,EAAK,OAAEC,EAAM,QAAEC,IAE5B,MAGMC,EAAIH,EACV,IAAII,EAAKC,KAAKC,IAAIL,GACdM,EAAKH,EALW,EAMhBI,EAAKJ,EANW,EAOhBK,EANe,GAOfP,IAASO,EAAKF,EAAIA,EAAKC,EAAIA,EAAKC,EAAIA,EAAKL,EAAKM,IAClD,MAAMC,EAAKN,KAAKO,GAAKT,EACrB,IAAIU,GAAMR,KAAKO,GAAK,GAAKV,EAAUG,KAAKO,GAAKT,EAAI,GACjD,MAAMW,EAAO,CAAC,IAAKP,EAAKF,KAAKU,IAAIF,GAAK,IAAKN,EAAKF,KAAKW,IAAIH,IACzD,IAAII,GAAK,EACT,OAASA,EAAId,GACXW,EAAKI,KACH,IAAKX,EAAI,IAAKA,EAAI,UAAWA,EAAKF,KAAKU,IAAIF,GAAMF,GAAK,IAAKJ,EAAKF,KAAKW,IAAIH,GACzE,IAAKT,EAAKC,KAAKU,IAAIF,GAAK,IAAKT,EAAKC,KAAKW,IAAIH,GAC3C,IAAKL,EAAKH,KAAKU,IAAIF,GAAMF,EAAK,GAAI,IAAKH,EAAKH,KAAKW,IAAIH,GACrD,IAAKL,EAAI,IAAKA,EAAI,UAAWA,EAAKH,KAAKU,IAAIF,GAAMF,EAAK,GAAI,IAAKH,EAAKH,KAAKW,IAAIH,GAC7E,IAAKT,EAAKC,KAAKU,IAAIF,GAAMF,EAAK,GAAI,IAAKP,EAAKC,KAAKW,IAAIH,GACrD,IAAKN,EAAKF,KAAKU,IAAIF,GAAK,IAAKN,EAAKF,KAAKW,IAAIH,IAI/C,OADAC,EAAKI,KAAK,OAAQT,EAAI,IAAKA,EAAI,IAAKA,EAAI,YAAaA,EAAI,IAAKA,EAAI,IAAKA,EAAI,aAAcA,EAAI,KACtFK,EAAKK,KAAK,IAGnB,SAASC,WACP,MAMMC,EAAIhB,KAAKW,IAAI,EAAIX,KAAKO,GAAK,GAC3BU,EAAIjB,KAAKU,IAAI,EAAIV,KAAKO,GAAK,GAC3BW,EAAQC,KAAKC,MAGbC,EAAMC,GAAGC,OAAO,OAAOC,OAAO,OAAOC,KAAK,QAPlC,KAOkDA,KAAK,SANtD,KAQTC,EAAQL,EAAIG,OAAO,KACtBC,KAAK,YAAa,sBAClBD,OAAO,KACPG,MAAM,CAAC/B,OAAQ,MAEZa,EAAOiB,EAAME,UAAU,KAC1BC,KAAK,CACJ,CAACC,KAAM,UAAWnC,MAAO,GAAIC,QAAQ,IAAamC,OAAQ,CAAC,EAAG,GAAIlC,SAAS,GAC3E,CAACiC,KAAM,UAAWnC,MAAO,GAAIC,OArBlB,GAqBkCmC,OAAQ,CAAC,EAAG,IACzD,CAACD,KAAM,UAAWnC,MAAO,GAAIC,QAAQ,GAAamC,OAAQ,CAAC,GAAG,MAC9D,CAACD,KAAM,UAAWnC,MAAO,GAAIC,QAAQ,GAAamC,OAAQ,EAAC,IAAcf,GAAG,IAAcC,IAC1F,CAACa,KAAM,UAAWnC,MAAO,GAAIC,QAAQ,GAAamC,OAAQ,CAACnC,IAAaoB,GAAG,IAAcC,MAE1FH,KAAK,KACLW,KAAK,YAAaO,GAAK,aAAaA,EAAED,WACtCP,OAAO,QACPC,KAAK,SAAU,SACfA,KAAK,OAAQO,GAAKA,EAAEF,MACpBL,KAAK,IAAK/B,MAgBb4B,GAAGW,UAAS,WACVC,aA/CY,EA+CQhB,EAAOT,EAAMiB,EAAOL,KACvC,GAAI,KAKT,SAASa,aAAaC,EAAOjB,EAAOT,EAAMiB,EAAOL,GAC/C,MAAMe,GAASjB,KAAKC,MAAQF,GAASiB,EAC/BE,EAAYL,GAAK,UAAUI,EAAQJ,EAAEpC,UAC3Ca,EAAKgB,KAAK,YAAaY,GACvBX,EAAMD,KAAK,YAAaY,GACxBhB,EAAIiB","file":"scripts.6e5547fadeef6724e277.js","sourcesContent":["\n\nfunction gear({teeth, radius, annulus}) {\n\n  const toothRadius = 4;\n  const holeRadius = 10;\n\n  const n = teeth;\n  let r2 = Math.abs(radius);\n  let r0 = r2 - toothRadius;\n  let r1 = r2 + toothRadius;\n  let r3 = holeRadius;\n  if (annulus) r3 = r0, r0 = r1, r1 = r3, r3 = r2 + toothRadius * 3;\n  const da = Math.PI / n;\n  let a0 = -Math.PI / 2 + (annulus ? Math.PI / n : 0);\n  const path = [\"M\", r0 * Math.cos(a0), \",\", r0 * Math.sin(a0)];\n  let i = -1;\n  while (++i < n) { // TODO Template literal.\n    path.push(\n      \"A\", r0, \",\", r0, \" 0 0,1 \", r0 * Math.cos(a0 += da), \",\", r0 * Math.sin(a0),\n      \"L\", r2 * Math.cos(a0), \",\", r2 * Math.sin(a0),\n      \"L\", r1 * Math.cos(a0 += da / 3), \",\", r1 * Math.sin(a0),\n      \"A\", r1, \",\", r1, \" 0 0,1 \", r1 * Math.cos(a0 += da / 3), \",\", r1 * Math.sin(a0),\n      \"L\", r2 * Math.cos(a0 += da / 3), \",\", r2 * Math.sin(a0),\n      \"L\", r0 * Math.cos(a0), \",\", r0 * Math.sin(a0)\n    );\n  }\n  path.push(\"M0,\", -r3, \"A\", r3, \",\", r3, \" 0 0,0 0,\", r3, \"A\", r3, \",\", r3, \" 0 0,0 0,\", -r3, \"Z\");\n  return path.join(\"\");\n}\n\nfunction drawGear() {\n  const radius = 45;\n  const speed = 2;\n  const frameRadius = 100;\n\n  const width = 600;\n  const height = 500;\n  const x = Math.sin(2 * Math.PI / 3);\n  const y = Math.cos(2 * Math.PI / 3);\n  const start = Date.now();\n\n  // const svg = d3.select(DOM.svg(width, height));\n  const svg = d3.select('div').append('svg').attr('width', width).attr('height', height);\n\n  const frame = svg.append(\"g\")\n    .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\")\n    .append(\"g\")\n    .datum({radius: +frameRadius});\n\n  const path = frame.selectAll(\"g\")\n    .data([\n      {fill: \"#c6dbef\", teeth: 80, radius: -radius * 5, origin: [0, 0], annulus: true},\n      {fill: \"#6baed6\", teeth: 16, radius: radius, origin: [0, 0]},\n      {fill: \"#9ecae1\", teeth: 32, radius: -radius * 2, origin: [0, -radius * 3]},\n      {fill: \"#9ecae1\", teeth: 32, radius: -radius * 2, origin: [-radius * 3 * x, -radius * 3 * y]},\n      {fill: \"#9ecae1\", teeth: 32, radius: -radius * 2, origin: [radius * 3 * x, -radius * 3 * y]}\n    ])\n    .join(\"g\")\n    .attr(\"transform\", d => `translate(${d.origin})`)\n    .append(\"path\")\n    .attr(\"stroke\", \"black\")\n    .attr(\"fill\", d => d.fill)\n    .attr(\"d\", gear);\n\n  // while (true) {\n  // drawInCanvas(speed, start, path, frame, svg).next().value;\n\n  // let angle = (Date.now() - start) * speed;\n  // let transform = d => `rotate(${angle / d.radius})`;\n  // path.attr(\"transform\", transform);\n  // frame.attr(\"transform\", transform);\n  // svg.node();\n\n  // return svg.node();\n  // }\n\n\n  // d3.timer(function () {\n  d3.interval(function () {\n    drawInCanvas(speed, start, path, frame, svg);\n  }, 10, 100)\n\n\n}\n\nfunction drawInCanvas(speed, start, path, frame, svg) {\n  const angle = (Date.now() - start) * speed;\n  const transform = d => `rotate(${angle / d.radius})`;\n  path.attr(\"transform\", transform);\n  frame.attr(\"transform\", transform);\n  svg.node();\n}\n"],"sourceRoot":"webpack:///"}